{"ast":null,"code":"import _objectSpread from\"F:/react-practice-10-2022/15.11.2022/advanced-redux/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useDispatch,useSelector}from\"react-redux\";import{cartActions}from\"../../store/cart-slice\";import Card from\"../UI/Card\";import classes from\"./ProductItem.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductItem=function ProductItem(props){var cart=useSelector(function(state){return state.cart;});var dispatch=useDispatch();var title=props.title,price=props.price,description=props.description,id=props.id;var addToCartHandler=function addToCartHandler(){var newTotalQuantity=cart.totalQuantity+1;var updatedItems=cart.items.slice();// create copy via slice to avoid mutating original state\nvar existingItem=updatedItems.find(function(item){return item.id===id;});if(existingItem){var updatedItem=_objectSpread({},existingItem);// new object + copy existing properties to avoid state mutation\nupdatedItem.quantity++;updatedItem.totalPrice=updatedItem.totalPrice+price;var existingItemIndex=updatedItems.findIndex(function(item){return item.id===id;});updatedItems[existingItemIndex]=updatedItem;}else{updatedItems.push({id:id,price:price,quantity:1,totalPrice:price,title:title});}var newCart={totalQuantity:newTotalQuantity,items:updatedItems};dispatch(cartActions.replaceCart(newCart));// and then send Http request\n// fetch('firebase-url', { method: 'POST', body: JSON.stringify(newCart) })\n// dispatch(\n//   cartActions.addItemToCart({\n//     id,\n//     title,\n//     price,\n//   })\n// );\n};return/*#__PURE__*/_jsx(\"li\",{className:classes.item,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(\"header\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:title}),/*#__PURE__*/_jsxs(\"div\",{className:classes.price,children:[\"Rs \",price.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"p\",{children:description}),/*#__PURE__*/_jsx(\"div\",{className:classes.actions,children:/*#__PURE__*/_jsx(\"button\",{onClick:addToCartHandler,children:\"Add to Cart\"})})]})});};export default ProductItem;","map":{"version":3,"names":["useDispatch","useSelector","cartActions","Card","classes","ProductItem","props","cart","state","dispatch","title","price","description","id","addToCartHandler","newTotalQuantity","totalQuantity","updatedItems","items","slice","existingItem","find","item","updatedItem","quantity","totalPrice","existingItemIndex","findIndex","push","newCart","replaceCart","toFixed","actions"],"sources":["F:/react-practice-10-2022/15.11.2022/advanced-redux/src/components/Shop/ProductItem.js"],"sourcesContent":["import { useDispatch, useSelector } from \"react-redux\";\n\nimport { cartActions } from \"../../store/cart-slice\";\nimport Card from \"../UI/Card\";\nimport classes from \"./ProductItem.module.css\";\n\nconst ProductItem = (props) => {\n  const cart = useSelector((state) => state.cart);\n  const dispatch = useDispatch();\n\n  const { title, price, description, id } = props;\n\n  const addToCartHandler = () => {\n    const newTotalQuantity = cart.totalQuantity + 1;\n\n    const updatedItems = cart.items.slice(); // create copy via slice to avoid mutating original state\n    const existingItem = updatedItems.find((item) => item.id === id);\n    if (existingItem) {\n      const updatedItem = { ...existingItem }; // new object + copy existing properties to avoid state mutation\n      updatedItem.quantity++;\n      updatedItem.totalPrice = updatedItem.totalPrice + price;\n      const existingItemIndex = updatedItems.findIndex(\n        (item) => item.id === id\n      );\n      updatedItems[existingItemIndex] = updatedItem;\n    } else {\n      updatedItems.push({\n        id: id,\n        price: price,\n        quantity: 1,\n        totalPrice: price,\n        title: title,\n      });\n    }\n\n    const newCart = {\n      totalQuantity: newTotalQuantity,\n      items: updatedItems,\n    };\n\n    dispatch(cartActions.replaceCart(newCart));\n\n    // and then send Http request\n    // fetch('firebase-url', { method: 'POST', body: JSON.stringify(newCart) })\n\n    // dispatch(\n    //   cartActions.addItemToCart({\n    //     id,\n    //     title,\n    //     price,\n    //   })\n    // );\n  };\n\n  return (\n    <li className={classes.item}>\n      <Card>\n        <header>\n          <h3>{title}</h3>\n          <div className={classes.price}>Rs {price.toFixed(2)}</div>\n        </header>\n        <p>{description}</p>\n        <div className={classes.actions}>\n          <button onClick={addToCartHandler}>Add to Cart</button>\n        </div>\n      </Card>\n    </li>\n  );\n};\n\nexport default ProductItem;\n"],"mappings":"wIAAA,OAASA,WAAW,CAAEC,WAAW,KAAQ,aAAa,CAEtD,OAASC,WAAW,KAAQ,wBAAwB,CACpD,MAAOC,KAAI,KAAM,YAAY,CAC7B,MAAOC,QAAO,KAAM,0BAA0B,CAAC,wFAE/C,GAAMC,YAAW,CAAG,QAAdA,YAAW,CAAIC,KAAK,CAAK,CAC7B,GAAMC,KAAI,CAAGN,WAAW,CAAC,SAACO,KAAK,QAAKA,MAAK,CAACD,IAAI,GAAC,CAC/C,GAAME,SAAQ,CAAGT,WAAW,EAAE,CAE9B,GAAQU,MAAK,CAA6BJ,KAAK,CAAvCI,KAAK,CAAEC,KAAK,CAAsBL,KAAK,CAAhCK,KAAK,CAAEC,WAAW,CAASN,KAAK,CAAzBM,WAAW,CAAEC,EAAE,CAAKP,KAAK,CAAZO,EAAE,CAErC,GAAMC,iBAAgB,CAAG,QAAnBA,iBAAgB,EAAS,CAC7B,GAAMC,iBAAgB,CAAGR,IAAI,CAACS,aAAa,CAAG,CAAC,CAE/C,GAAMC,aAAY,CAAGV,IAAI,CAACW,KAAK,CAACC,KAAK,EAAE,CAAE;AACzC,GAAMC,aAAY,CAAGH,YAAY,CAACI,IAAI,CAAC,SAACC,IAAI,QAAKA,KAAI,CAACT,EAAE,GAAKA,EAAE,GAAC,CAChE,GAAIO,YAAY,CAAE,CAChB,GAAMG,YAAW,kBAAQH,YAAY,CAAE,CAAE;AACzCG,WAAW,CAACC,QAAQ,EAAE,CACtBD,WAAW,CAACE,UAAU,CAAGF,WAAW,CAACE,UAAU,CAAGd,KAAK,CACvD,GAAMe,kBAAiB,CAAGT,YAAY,CAACU,SAAS,CAC9C,SAACL,IAAI,QAAKA,KAAI,CAACT,EAAE,GAAKA,EAAE,GACzB,CACDI,YAAY,CAACS,iBAAiB,CAAC,CAAGH,WAAW,CAC/C,CAAC,IAAM,CACLN,YAAY,CAACW,IAAI,CAAC,CAChBf,EAAE,CAAEA,EAAE,CACNF,KAAK,CAAEA,KAAK,CACZa,QAAQ,CAAE,CAAC,CACXC,UAAU,CAAEd,KAAK,CACjBD,KAAK,CAAEA,KACT,CAAC,CAAC,CACJ,CAEA,GAAMmB,QAAO,CAAG,CACdb,aAAa,CAAED,gBAAgB,CAC/BG,KAAK,CAAED,YACT,CAAC,CAEDR,QAAQ,CAACP,WAAW,CAAC4B,WAAW,CAACD,OAAO,CAAC,CAAC,CAE1C;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACF,CAAC,CAED,mBACE,WAAI,SAAS,CAAEzB,OAAO,CAACkB,IAAK,uBAC1B,MAAC,IAAI,yBACH,uCACE,oBAAKZ,KAAK,EAAM,cAChB,aAAK,SAAS,CAAEN,OAAO,CAACO,KAAM,iBAAKA,KAAK,CAACoB,OAAO,CAAC,CAAC,CAAC,GAAO,GACnD,cACT,mBAAInB,WAAW,EAAK,cACpB,YAAK,SAAS,CAAER,OAAO,CAAC4B,OAAQ,uBAC9B,eAAQ,OAAO,CAAElB,gBAAiB,yBAAqB,EACnD,GACD,EACJ,CAET,CAAC,CAED,cAAeT,YAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}